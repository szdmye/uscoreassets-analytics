(function(){"use strict";var e={4155:function(e,t,a){var l=a(3751),s=a(641),n=a(33);function o(e,t,a,l,o,i){const r=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(r),(0,s.Lk)("div",null,[(0,s.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.fetchData&&i.fetchData(...e))},"获取数据"),(0,s.Lk)("p",null,(0,n.v_)(o.responseData),1)])],64)}var i=a(4335);const r=i.A.create({baseURL:"http://localhost:8081/api",timeout:1e4}),c=()=>r.get("/hello");var u={data(){return{responseData:""}},methods:{async fetchData(){try{const e=await c();this.responseData=e.data}catch(e){console.error("获取数据失败:",e)}}}},d=a(6262);const v=(0,d.A)(u,[["render",o],["__scopeId","data-v-367cd88f"]]);var m=v,h=a(5220),p=a(953),g=(a(4114),a(8111),a(2489),a(7588),a(1701),a(8237),a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698),a(810)),k=a(4809),f=a.n(k);const L=(0,g.nY)("stock",{state:()=>({rawData:[],processedData:{},stockNames:[],lastUpdateTime:"",isLoading:!1,error:"",totalCount:0,csvFileName:"stock.csv"}),getters:{stockPriceStats(){if(0===this.rawData.length)return{maxPrice:0,minPrice:0,avgPrice:0};const e=this.rawData.map(e=>e.last);return{maxPrice:Math.max(...e),minPrice:Math.min(...e),avgPrice:parseFloat((e.reduce((e,t)=>e+t,0)/e.length).toFixed(2))}},getLatestStockData(){return e=>{const t=this.processedData[e];if(t&&0!==t.length)return[...t].sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime())[0]}},csvFilePath(){return`/${this.csvFileName.replace(/^\//,"")}`}},actions:{async loadFromPublicCsv(e){e&&(this.csvFileName=e),await this.loadStockData()},async loadStockData(e){this.isLoading=!0,this.error="";try{let t;if(e)t=await new Promise((t,a)=>{const l=new FileReader;l.onload=e=>t(e.target?.result),l.onerror=()=>a(new Error(`文件读取失败: ${l.error?.message||"未知错误"}`)),l.readAsText(e)});else{const e=await fetch(this.csvFilePath,{headers:{"Content-Type":"text/csv","Cache-Control":"no-cache"}});if(!e.ok)throw 404===e.status?new Error(`未找到CSV文件，请确认 ${this.csvFilePath} 已放在public目录下`):new Error(`数据加载失败 (HTTP状态码: ${e.status})`);t=await e.text()}const a=f().parse(t,{header:!0,dynamicTyping:{last:!0,high:!0,low:!0},skipEmptyLines:!0,fastMode:!0});if(a.errors.length>0){const e=a.errors[0];throw new Error(`CSV解析错误: ${e.message}（行号: ${e.row+1}）`)}this.rawData=a.data.filter(e=>e.name&&e.timestamp&&!isNaN(e.last)),this.rawData=Array.from(new Map(this.rawData.map(e=>[`${e.timestamp}-${e.name}`,e])).values()),this.rawData.forEach(e=>{e.vol_.endsWith("M")?e.volNum=1e6*parseFloat(e.vol_.replace("M","")):e.volNum=parseFloat(e.vol_),e.chgPercentNum=parseFloat(e["chg_%"].replace("%",""))}),this.processedData=this.rawData.reduce((e,t)=>{const a=t.name||"";return e[a]||(e[a]=[]),e[a].push(t),e},{}),this.stockNames=Array.from(new Set(this.rawData.map(e=>e.name))).sort(),this.totalCount=this.rawData.length,this.lastUpdateTime=(new Date).toLocaleString(),console.log(`成功加载数据: 共 ${this.totalCount} 条记录，${this.stockNames.length} 只股票`)}catch(t){this.error=t instanceof Error?t.message:"加载数据时发生错误",console.error("数据加载失败:",t)}finally{this.isLoading=!1}},resetStockData(){this.rawData=[],this.processedData={},this.stockNames=[],this.lastUpdateTime="",this.error="",this.totalCount=0}}}),b={class:"header"},y={class:"header-container"},w={class:"page-title"},C={class:"header-actions"},_={key:0,class:"loading-status"},x={key:1,class:"error-alert"},E={class:"error-text"},F={class:"upload-btn"};var D={__name:"StockHeader",setup(e){const t=L(),a=(0,s.EW)(()=>t.isLoading),l=(0,s.EW)(()=>t.error),o=(0,p.KR)(!1),i=(0,p.KR)(!0),r=()=>{o.value=window.innerWidth<768,o.value?i.value=!1:i.value=!0};(0,s.sV)(()=>{r(),window.addEventListener("resize",r)});const c=()=>{i.value=!i.value,t.setSidebarVisible(i.value)},u=e=>{const a=e.target.files[0];a&&a.name.endsWith(".csv")?(t.loadStockData(a),e.target.value=""):t.error="请选择有效的CSV文件"},d=()=>{t.error=""};return(e,t)=>((0,s.uX)(),(0,s.CE)("header",b,[(0,s.Lk)("div",y,[o.value?((0,s.uX)(),(0,s.CE)("button",{key:0,class:"menu-toggle",onClick:c},[...t[0]||(t[0]=[(0,s.Lk)("i",{class:"bi bi-list"},null,-1)])])):(0,s.Q3)("",!0),(0,s.Lk)("h1",w,(0,n.v_)(e.$route.meta.title||"股票分析系统"),1),(0,s.Lk)("div",C,[a.value?((0,s.uX)(),(0,s.CE)("div",_,[...t[1]||(t[1]=[(0,s.Lk)("span",{class:"spinner"},null,-1),(0,s.Lk)("span",{class:"loading-text"},"加载中...",-1)])])):(0,s.Q3)("",!0),l.value?((0,s.uX)(),(0,s.CE)("div",x,[t[2]||(t[2]=(0,s.Lk)("i",{class:"bi bi-exclamation-circle"},null,-1)),(0,s.Lk)("span",E,(0,n.v_)(l.value),1),(0,s.Lk)("button",{class:"close-btn",onClick:d},"×")])):(0,s.Q3)("",!0),(0,s.Lk)("label",F,[(0,s.Lk)("input",{type:"file",accept:".csv",onChange:u,hidden:""},null,32),t[3]||(t[3]=(0,s.Lk)("i",{class:"bi bi-upload"},null,-1)),t[4]||(t[4]=(0,s.Lk)("span",null,"上传CSV",-1))]),t[5]||(t[5]=(0,s.Lk)("div",{class:"user-info"},[(0,s.Lk)("img",{src:"https://picsum.photos/id/1005/200/200",alt:"用户头像",class:"avatar"}),(0,s.Lk)("span",{class:"username"},"分析师")],-1))])])]))}};const M=(0,d.A)(D,[["__scopeId","data-v-49f6ac98"]]);var S=M;const P={class:"sidebar"},A={class:"sidebar-menu"},$={class:"sidebar-filter mt-4"},X={class:"filter-tags"},R=["onClick"],K={class:"top-gainers mt-4"},T={class:"gainer-list"},N={class:"gainer-name"},O={class:"gainer-change positive"},I={class:"top-volume mt-4"},W={class:"volume-list"},Q={class:"volume-name"},V={class:"volume-value"},z={key:0,class:"sidebar-footer"};var B={__name:"StockSidebar",setup(e){const t=L(),a=(0,s.EW)(()=>t.lastUpdateTime||"2023-10-06"),l=(0,p.KR)([{label:"全部",value:"all"},{label:"科技股",value:"tech"},{label:"工业股",value:"industrial"},{label:"消费股",value:"consume"},{label:"医药股",value:"pharmaceutical"}]),o=(0,p.KR)("all"),i=e=>{o.value=e,t.setSelectedCategory&&t.setSelectedCategory(e)},r=(0,p.KR)([{name:"3M",last:145.06,high:145.31,low:143.15,chg:.83,chgPercent:.58,vol:"3.13M"},{name:"Amazon",last:217.61,high:217.69,low:214.15,chg:.63,chgPercent:.29,vol:"31.18M"},{name:"American",last:299.52,high:301.78,low:298,chg:-2.04,chgPercent:-.68,vol:"2.05M"},{name:"Amgen",last:293.43,high:295.64,low:289.79,chg:3.45,chgPercent:1.19,vol:"2.44M"},{name:"Apple",last:202.67,high:204.35,low:200.57,chg:1.22,chgPercent:.61,vol:"52M"},{name:"Boeing",last:215.73,high:217.9,low:213.25,chg:-1.78,chgPercent:-.82,vol:"8.19M"},{name:"Caterpillar",last:358.57,high:360.36,low:356.09,chg:.5,chgPercent:.14,vol:"1.89M"},{name:"Chevron",last:143.35,high:144.94,low:141.91,chg:2.59,chgPercent:1.84,vol:"9.84M"},{name:"Cisco",last:65.15,high:66.08,low:64.81,chg:-.75,chgPercent:-1.14,vol:"16.66M"},{name:"Coca-Cola",last:72.35,high:72.69,low:71.76,chg:.58,chgPercent:.81,vol:"12.26M"}]),c=(0,s.EW)(()=>[...r.value].sort((e,t)=>t.chgPercent-e.chgPercent).slice(0,3)),u=(0,s.EW)(()=>[...r.value].sort((e,t)=>{const a=parseFloat(e.vol)*(e.vol.includes("M")?1:.001),l=parseFloat(t.vol)*(t.vol.includes("M")?1:.001);return l-a}).slice(0,3));return(e,t)=>{const r=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("aside",P,[t[6]||(t[6]=(0,s.Lk)("div",{class:"sidebar-header"},[(0,s.Lk)("h3",{class:"sidebar-title"},"股票分析系统")],-1)),(0,s.Lk)("nav",A,[(0,s.bF)(r,{to:"/",class:(0,n.C4)(["menu-item",{active:"/"===e.$route.path}])},{default:(0,s.k6)(()=>[...t[0]||(t[0]=[(0,s.Lk)("i",{class:"bi bi-grid-3x3-gap"},null,-1),(0,s.Lk)("span",null,"市场概况",-1)])]),_:1},8,["class"]),(0,s.bF)(r,{to:"/stock-analysis",class:(0,n.C4)(["menu-item",{active:"/stock-analysis"===e.$route.path}])},{default:(0,s.k6)(()=>[...t[1]||(t[1]=[(0,s.Lk)("i",{class:"bi bi-bar-chart-line"},null,-1),(0,s.Lk)("span",null,"个股分析",-1)])]),_:1},8,["class"]),(0,s.bF)(r,{to:"/data-list",class:(0,n.C4)(["menu-item",{active:"/data-list"===e.$route.path}])},{default:(0,s.k6)(()=>[...t[2]||(t[2]=[(0,s.Lk)("i",{class:"bi bi-table"},null,-1),(0,s.Lk)("span",null,"数据列表",-1)])]),_:1},8,["class"])]),(0,s.Lk)("div",$,[t[3]||(t[3]=(0,s.Lk)("h4",{class:"section-title"},"股票分类",-1)),(0,s.Lk)("div",X,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.value,e=>((0,s.uX)(),(0,s.CE)("button",{key:e.value,class:(0,n.C4)(["tag-btn",{active:o.value===e.value}]),onClick:t=>i(e.value)},(0,n.v_)(e.label),11,R))),128))])]),(0,s.Lk)("div",K,[t[4]||(t[4]=(0,s.Lk)("h4",{class:"section-title"},"涨幅排行",-1)),(0,s.Lk)("div",T,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(c.value,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{class:"gainer-item",key:t},[(0,s.Lk)("span",N,(0,n.v_)(e.name),1),(0,s.Lk)("span",O,(0,n.v_)(e.chgPercent)+"%",1)]))),128))])]),(0,s.Lk)("div",I,[t[5]||(t[5]=(0,s.Lk)("h4",{class:"section-title"},"交易量排行",-1)),(0,s.Lk)("div",W,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(u.value,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{class:"volume-item",key:t},[(0,s.Lk)("span",Q,(0,n.v_)(e.name),1),(0,s.Lk)("span",V,(0,n.v_)(e.vol),1)]))),128))])]),a.value?((0,s.uX)(),(0,s.CE)("div",z,[(0,s.Lk)("p",null,"最后更新："+(0,n.v_)(a.value),1)])):(0,s.Q3)("",!0)])}}};const U=(0,d.A)(B,[["__scopeId","data-v-6cf19e40"]]);var j=U;const Y={class:"app-container"},H={class:"app-content"},G={class:"content-wrapper"};var J={__name:"MainLayout",setup(e){return(e,t)=>{const a=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",Y,[(0,s.bF)(S),(0,s.Lk)("div",H,[(0,s.bF)(j),(0,s.Lk)("main",G,[(0,s.bF)(a)])])])}}};const Z=(0,d.A)(J,[["__scopeId","data-v-101d592d"]]);var q=Z,ee=(a(1148),a(116),a(7043));const te={class:"container-fluid p-4"},ae={key:0,class:"alert alert-info text-center animate-pulse"},le={key:1,class:"alert alert-danger shadow-lg"},se={key:2,class:"alert alert-warning text-center"},ne={key:3,class:"chart-container"},oe={class:"row mb-4"},ie={class:"card-body"},re={class:"card-title"},ce={class:"card mb-4 shadow"},ue={class:"card-header d-flex flex-wrap justify-content-between align-items-center gap-2"},de={class:"d-flex gap-2"},ve=["disabled"],me=["value"],he={class:"card-body position-relative"},pe={key:0,class:"chart-loading"},ge={key:1,class:"chart-loading"},ke={class:"card shadow"},fe={class:"card-header d-flex flex-wrap justify-content-between align-items-center gap-2"},Le={class:"d-flex gap-2"},be=["disabled"],ye=["value"],we={class:"card-body position-relative"},Ce={key:0,class:"chart-loading"},_e={key:1,class:"chart-loading"};var xe={__name:"StockCharts",setup(e){const t=L(),a=(0,p.KR)([]),o=(0,p.KR)([]),i=(0,p.KR)(""),r=(0,p.KR)("1m"),c=(0,p.KR)("1m"),u=(0,p.KR)(!1),d=(0,p.KR)(!1),v=(0,p.KR)(!1),m=(0,p.KR)(!1);let h=null,g=null;const k=(0,s.EW)(()=>[{title:"股票总数",value:a.value.length,class:"bg-gradient-primary",size:"display-4"},{title:"数据总条数",value:t.totalCount.toLocaleString(),class:"bg-gradient-success",size:"display-4"},{title:"平均股价",value:f.value,class:"bg-gradient-info",size:"h5"},{title:"最大成交量",value:b.value,class:"bg-gradient-warning",size:"h5"}]),f=(0,s.EW)(()=>{if(!t.totalCount)return"$0.00";let e=0,a=0;return Object.values(t.processedData).forEach(t=>{t.forEach(t=>{e+=parseFloat(t.last||0),a++})}),`$${(e/a).toFixed(2)}`}),b=(0,s.EW)(()=>{if(!t.totalCount)return"0M";let e=0;return Object.values(t.processedData).forEach(t=>{t.forEach(t=>{if(t&&t.vol){const a=parseFloat(P(t.vol));a>e&&(e=a)}})}),e>=1e6?`${(e/1e6).toFixed(2)}M`:e>=1e3?`${(e/1e3).toFixed(2)}K`:`${e.toFixed(2)}`}),y=async()=>{await(0,s.dY)();const e=document.getElementById("priceTrendChart"),t=document.getElementById("volumeChangeChart");e&&!h&&(h&&h.dispose(),h=ee.Ts(e),h.setOption({animation:!1,title:{text:"请选择股票",left:"center",top:"middle",textStyle:{color:"#999"}}})),t&&!g&&(g&&g.dispose(),g=ee.Ts(t),g.setOption({animation:!1,title:{text:"请选择股票",left:"center",top:"middle",textStyle:{color:"#999"}}})),window.addEventListener("resize",w)};(0,s.sV)(async()=>{const e=localStorage.getItem("stockData");if(e)try{const{processedData:a,stockNames:l,totalCount:s}=JSON.parse(e);t.setProcessedData(a),t.setStockNames(l),t.setTotalCount(s)}catch(s){console.error("加载本地存储数据失败:",s),localStorage.removeItem("stockData")}if(!t.rawData.length)try{const e=await fetch("/stock.csv",{cache:"no-cache"});if(e.ok){const a=await e.text(),l=new File([new Blob([a])],"stock.csv");await t.loadStockData(l)}}catch(n){console.error("自动加载默认数据失败:",n),t.error="自动加载数据失败，请手动上传CSV文件"}await y();const l=()=>{document.getElementById("priceTrendChart")&&document.getElementById("volumeChangeChart")&&a.value.length?(C(),_()):setTimeout(l,100)};l()}),(0,s.hi)(()=>{window.removeEventListener("resize",w),h&&(h.dispose(),h=null),g&&(g.dispose(),g=null)}),(0,s.wB)(()=>[t.stockNames,t.processedData],([e,l])=>{e.length&&(a.value=e,!o.value.length||o.value.every(t=>!e.includes(t))?o.value=e.slice(0,2):(o.value=o.value.filter(t=>e.includes(t)),o.value.length||(o.value=[e[0]])),e.includes(i.value)&&i.value||(i.value=e[0]||""),localStorage.setItem("stockData",JSON.stringify({processedData:l,stockNames:e,totalCount:t.totalCount})),(0,s.dY)(()=>{C(),_()}))},{immediate:!0,deep:!0});const w=()=>{h&&h.resize(),g&&g.resize()},C=async()=>{if(h&&document.getElementById("priceTrendChart")&&o.value.length){u.value=!0,v.value=!1;try{const e=await Promise.all(o.value.map(e=>{const a=t.processedData[e]||[];if(!a.length)return null;let l=[...a].sort((e,t)=>new Date(e.timestamp)-new Date(t.timestamp)).filter(e=>E(e,r.value)).map(e=>[new Date(e.timestamp).getTime(),parseFloat(e.last||0),parseFloat(e.high||0),parseFloat(e.low||0)]);return 0===l.length?null:(l.length>5e3&&(l=x(l,5e3)),{name:e,type:"line",data:l.map(e=>[e[0],e[1]]),smooth:!0,lineStyle:{width:2,color:M(e)},symbol:"none",emphasis:{symbol:"circle",symbolSize:6},markLine:{data:[{type:"average",name:"平均股价"}],label:{formatter:"{c:.2f}"}},markArea:{silent:!0,itemStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:M(e)+"33"},{offset:1,color:M(e)+"00"}]}},data:[[{type:"min",valueDim:"low",name:"最低价"},{type:"max",valueDim:"high",name:"最高价"}]]}})})).filter(Boolean);if(0===e.length)return v.value=!0,void h.setOption({title:{text:"所选时间范围内没有数据",left:"center",top:"middle",textStyle:{color:"#999"}},series:[]});h.setOption({title:{show:!1},tooltip:{trigger:"axis",formatter:t=>{const a=new Date(t[0].name),l=e.find(e=>e.name===t[0].seriesName)?.data.find(e=>e[0]===t[0].name);return`<div><strong>${t[0].seriesName}</strong></div>\n                  <div>${S(a,!0)}</div>\n                  <div>最新价：$${t[0].value[1].toFixed(2)}</div>\n                  <div>最高价：$${l?.[2].toFixed(2)||"-"}</div>\n                  <div>最低价：$${l?.[3].toFixed(2)||"-"}</div>`}},legend:{data:o.value,top:0,icon:"circle"},grid:{left:"3%",right:"4%",bottom:"3%",top:"15%",containLabel:!0},xAxis:{type:"time",axisLabel:{rotate:30}},yAxis:{type:"value",name:"股价（USD）",axisLabel:{formatter:"${value}"},min:function(e){return Math.floor(.95*e.min)}},series:e})}catch(e){console.error("股价图表更新失败:",e),t.error="股价图表更新失败，请重试"}finally{u.value=!1}}},_=async()=>{if(g&&document.getElementById("volumeChangeChart")&&i.value){d.value=!0,m.value=!1;try{const e=t.processedData[i.value]||[];if(!e.length)return void(m.value=!0);let a=[...e].sort((e,t)=>new Date(e.timestamp)-new Date(t.timestamp)).filter(e=>E(e,c.value)).map(e=>({time:new Date(e.timestamp).getTime(),volume:P(e.vol),change:parseFloat(e.chgPercent?.replace(/%/g,"")||0),last:parseFloat(e.last||0)}));if(0===a.length)return m.value=!0,void g.setOption({title:{text:"所选时间范围内没有数据",left:"center",top:"middle",textStyle:{color:"#999"}},series:[]});a.length>5e3&&(a=x(a,5e3,!0));const l=a.map(e=>[e.time,e.volume]),s=a.map(e=>[e.time,e.change]),n=M(i.value);g.setOption({title:{show:!1},tooltip:{trigger:"axis",formatter:e=>{const t=new Date(e[0].name);return`<div><strong>${i.value}</strong></div>\n                  <div>${S(t,!0)}</div>\n                  <div>最新价：$${e[2]?.value[1].toFixed(2)||"-"}</div>\n                  <div>成交量：${A(e[0].value[1])}</div>\n                  <div>涨跌幅：${e[1].value[1].toFixed(2)}%</div>`}},grid:[{left:"3%",right:"4%",bottom:"50%",top:"3%",containLabel:!0},{left:"3%",right:"4%",bottom:"3%",top:"55%",containLabel:!0}],xAxis:[{type:"time",axisLabel:{rotate:30}},{type:"time",gridIndex:1}],yAxis:[{type:"value",name:"成交量",axisLabel:{formatter:function(e){return A(e,!0)}}},{type:"value",gridIndex:1,name:"涨跌幅（%）",axisLabel:{formatter:"{value}%"},axisLine:{lineStyle:{color:"#666"}},splitLine:{show:!1}}],series:[{name:"成交量",type:"bar",data:l,barWidth:"30%",itemStyle:{color:({data:e})=>{const t=s.find(t=>t[0]===e[0])?.[1]||0;return t>=0?"#28a745":"#dc3545"}}},{name:"涨跌幅",type:"line",xAxisIndex:1,yAxisIndex:1,data:s,lineStyle:{color:n},itemStyle:{color:({data:e})=>e[1]>=0?"#28a745":"#dc3545"},markLine:{data:[{yAxis:0,name:"基准线"}]}},{name:"最新价",type:"line",data:a.map(e=>[e.time,e.last]),lineStyle:{color:"#17a2b8",type:"dashed"},symbol:"none",tooltip:{show:!1}}]})}catch(e){console.error("成交量图表更新失败:",e),t.error="成交量图表更新失败，请重试"}finally{d.value=!1}}},x=(e,t,a=!1)=>{if(e.length<=t)return e;const l=Math.ceil(e.length/t);return e.filter((e,t)=>t%l===0).map(e=>a?{...e}:[...e])},E=(e,t)=>{if("all"===t)return!0;const a=new Date,l=new Date;switch(t){case"1d":l.setDate(a.getDate()-1);break;case"1w":l.setDate(a.getDate()-7);break;case"1m":l.setMonth(a.getMonth()-1);break;case"3m":l.setMonth(a.getMonth()-3);break;case"1y":l.setFullYear(a.getFullYear()-1);break;default:return!0}const s=new Date(e.timestamp);return!isNaN(s.getTime())&&s>=l},F={},D=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],M=e=>e?(F[e]||(F[e]=D[Object.keys(F).length%D.length]),F[e]):D[0],S=(e,t=!1)=>{if(isNaN(e.getTime()))return"无效日期";const a=`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`;return t?`${a} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`:a},P=e=>{if(!e||"string"!==typeof e)return console.warn("无效的成交量数据:",e),0;const t=e.trim().match(/^(\d+(\.\d+)?)([MK]?)$/i);if(!t)return console.warn("无法解析的成交量格式:",e),0;const a=parseFloat(t[1]),l=t[3];switch(l.toUpperCase()){case"M":return 1e6*a;case"K":return 1e3*a;default:return a}},A=(e,t=!1)=>e>=1e6?t?`${(e/1e6).toFixed(1)}M`:`${(e/1e6).toFixed(2)}M`:e>=1e3?t?`${(e/1e3).toFixed(1)}K`:`${(e/1e3).toFixed(2)}K`:e.toFixed(0),$=async e=>{const a=e.target.files[0];if(a)if(a.name.endsWith(".csv"))try{t.isLoading=!0,await t.loadStockData(a),e.target.value=""}catch(l){console.error("文件解析失败:",l),t.error="文件解析失败，请检查文件格式是否符合要求"}finally{t.isLoading=!1}else t.error="请上传CSV格式的文件"},X=()=>t.error="";return(e,h)=>((0,s.uX)(),(0,s.CE)("div",te,[(0,p.R1)(t).isLoading?((0,s.uX)(),(0,s.CE)("div",ae,[...h[4]||(h[4]=[(0,s.Lk)("i",{class:"bi bi-hourglass-split me-2"},null,-1),(0,s.eW)("正在加载股票数据... ",-1)])])):(0,s.Q3)("",!0),(0,p.R1)(t).error&&!(0,p.R1)(t).isLoading?((0,s.uX)(),(0,s.CE)("div",le,[h[5]||(h[5]=(0,s.Lk)("i",{class:"bi bi-exclamation-triangle me-2"},null,-1)),(0,s.eW)((0,n.v_)((0,p.R1)(t).error)+" ",1),(0,s.Lk)("button",{class:"btn-close ms-3",type:"button","aria-label":"Close",onClick:X})])):(0,s.Q3)("",!0),(0,p.R1)(t).isLoading||(0,p.R1)(t).error||0!==(0,p.R1)(t).totalCount?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",se,[h[6]||(h[6]=(0,s.Lk)("i",{class:"bi bi-database-slash me-2"},null,-1)),h[7]||(h[7]=(0,s.eW)("未加载到股票数据，请上传CSV文件 ",-1)),(0,s.Lk)("input",{type:"file",class:"form-control mt-3",accept:".csv",onChange:$},null,32)])),!(0,p.R1)(t).isLoading&&!(0,p.R1)(t).error&&(0,p.R1)(t).totalCount>0?((0,s.uX)(),(0,s.CE)("div",ne,[(0,s.Lk)("div",oe,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(k.value,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{class:"col-md-3",key:t},[(0,s.Lk)("div",{class:(0,n.C4)(["card",e.class+" text-white shadow"])},[(0,s.Lk)("div",ie,[(0,s.Lk)("h6",re,(0,n.v_)(e.title),1),(0,s.Lk)("h2",{class:(0,n.C4)(e.size)},(0,n.v_)(e.value),3)])],2)]))),128))]),(0,s.Lk)("div",ce,[(0,s.Lk)("div",ue,[h[9]||(h[9]=(0,s.Lk)("h5",{class:"card-title mb-0"},"股票价格趋势图",-1)),(0,s.Lk)("div",de,[(0,s.bo)((0,s.Lk)("select",{class:"form-select w-auto","onUpdate:modelValue":h[0]||(h[0]=e=>r.value=e),onChange:C},[...h[8]||(h[8]=[(0,s.Fv)('<option value="1d">1天</option><option value="1w">1周</option><option value="1m">1月</option><option value="3m">3月</option><option value="1y">1年</option><option value="all">全部</option>',6)])],544),[[l.u1,r.value]]),(0,s.bo)((0,s.Lk)("select",{class:"form-select w-auto","onUpdate:modelValue":h[1]||(h[1]=e=>o.value=e),multiple:"",onChange:C,disabled:!a.value.length},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,e=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e},(0,n.v_)(e),9,me))),128))],40,ve),[[l.u1,o.value]])])]),(0,s.Lk)("div",he,[h[12]||(h[12]=(0,s.Lk)("div",{id:"priceTrendChart",class:"w-100",style:{height:"400px"}},null,-1)),u.value?((0,s.uX)(),(0,s.CE)("div",pe,[...h[10]||(h[10]=[(0,s.Lk)("i",{class:"bi bi-spinner bi-spin me-2"},null,-1),(0,s.eW)("图表渲染中... ",-1)])])):(0,s.Q3)("",!0),!u.value&&v.value?((0,s.uX)(),(0,s.CE)("div",ge,[...h[11]||(h[11]=[(0,s.Lk)("i",{class:"bi bi-info-circle me-2"},null,-1),(0,s.eW)("所选时间范围内没有数据 ",-1)])])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",ke,[(0,s.Lk)("div",fe,[h[14]||(h[14]=(0,s.Lk)("h5",{class:"card-title mb-0"},"成交量与涨跌幅关联分析",-1)),(0,s.Lk)("div",Le,[(0,s.bo)((0,s.Lk)("select",{class:"form-select w-auto","onUpdate:modelValue":h[2]||(h[2]=e=>c.value=e),onChange:_},[...h[13]||(h[13]=[(0,s.Fv)('<option value="1d">1天</option><option value="1w">1周</option><option value="1m">1月</option><option value="3m">3月</option><option value="1y">1年</option><option value="all">全部</option>',6)])],544),[[l.u1,c.value]]),(0,s.bo)((0,s.Lk)("select",{class:"form-select w-auto","onUpdate:modelValue":h[3]||(h[3]=e=>i.value=e),onChange:_,disabled:!a.value.length},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,e=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:e},(0,n.v_)(e),9,ye))),128))],40,be),[[l.u1,i.value]])])]),(0,s.Lk)("div",we,[h[17]||(h[17]=(0,s.Lk)("div",{id:"volumeChangeChart",class:"w-100",style:{height:"400px"}},null,-1)),d.value?((0,s.uX)(),(0,s.CE)("div",Ce,[...h[15]||(h[15]=[(0,s.Lk)("i",{class:"bi bi-spinner bi-spin me-2"},null,-1),(0,s.eW)("图表渲染中... ",-1)])])):(0,s.Q3)("",!0),!d.value&&m.value?((0,s.uX)(),(0,s.CE)("div",_e,[...h[16]||(h[16]=[(0,s.Lk)("i",{class:"bi bi-info-circle me-2"},null,-1),(0,s.eW)("所选时间范围内没有数据 ",-1)])])):(0,s.Q3)("",!0)])])])):(0,s.Q3)("",!0)]))}};const Ee=xe;var Fe=Ee;const De={class:"stock-analysis-container"},Me={class:"stock-selector"},Se=["value"],Pe={key:0,class:"stock-info-card"},Ae={class:"info-item"},$e={class:"info-value"},Xe={class:"info-item"},Re={class:"info-item"},Ke={class:"info-value"},Te={class:"info-item"},Ne={class:"info-value"},Oe={class:"info-item"},Ie={class:"info-value"},We={class:"info-item"},Qe={class:"info-value"},Ve={key:1,class:"metrics-container"},ze={class:"metrics-grid"},Be={class:"metric-card"},Ue={class:"metric-value"},je={class:"metric-card"},Ye={class:"metric-value"},He={class:"metric-card"},Ge={class:"metric-value"},Je={class:"metric-card"},Ze={class:"metric-value"},qe={class:"metric-card"},et={class:"metric-value"},tt={class:"metric-card"},at={class:"metric-value"};var lt={__name:"StockAnalysis",setup(e){const t=(0,p.KR)([{symbol:"AAPL",name:"苹果公司"},{symbol:"MSFT",name:"微软公司"},{symbol:"AMZN",name:"亚马逊"},{symbol:"GOOGL",name:"谷歌"},{symbol:"META",name:"元宇宙"}]),a=(0,p.KR)("AAPL"),o=(0,p.KR)(null),i=e=>null===e||void 0===e?"N/A":e.toFixed(2),r=()=>{const e={AAPL:180,MSFT:320,AMZN:130,GOOGL:125,META:300}[a.value]||150,t=e+(20*Math.random()-10),l=5*Math.random()-2;o.value={price:t,change:l,changePercent:l/t*100,open:t-3*Math.random(),high:t+2*Math.random(),low:t-4*Math.random(),volume:(Math.floor(5e6+15e6*Math.random())/1e6).toFixed(2)+"M",metrics:{peRatio:15+20*Math.random(),pbRatio:2+8*Math.random(),dividendYield:5*Math.random(),marketCap:(1+2*Math.random()).toFixed(1)+"万亿",week52High:t+50*Math.random(),week52Low:t-50*Math.random()}}};return(0,s.wB)(a,r),(0,s.sV)(r),(e,c)=>((0,s.uX)(),(0,s.CE)("div",De,[c[15]||(c[15]=(0,s.Lk)("div",{class:"page-header"},[(0,s.Lk)("h1",null,"个股分析"),(0,s.Lk)("p",null,"详细分析单只股票的历史表现和关键指标")],-1)),(0,s.Lk)("div",Me,[c[1]||(c[1]=(0,s.Lk)("label",{for:"stock-select"},"选择股票:",-1)),(0,s.bo)((0,s.Lk)("select",{id:"stock-select","onUpdate:modelValue":c[0]||(c[0]=e=>a.value=e),onChange:r},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.value,e=>((0,s.uX)(),(0,s.CE)("option",{key:e.symbol,value:e.symbol},(0,n.v_)(e.name)+" ("+(0,n.v_)(e.symbol)+") ",9,Se))),128))],544),[[l.u1,a.value]])]),o.value?((0,s.uX)(),(0,s.CE)("div",Pe,[(0,s.Lk)("div",Ae,[c[2]||(c[2]=(0,s.Lk)("span",{class:"info-label"},"当前价格",-1)),(0,s.Lk)("span",$e,(0,n.v_)(i(o.value.price)),1)]),(0,s.Lk)("div",Xe,[c[3]||(c[3]=(0,s.Lk)("span",{class:"info-label"},"今日涨跌幅",-1)),(0,s.Lk)("span",{class:(0,n.C4)(["info-value",o.value.change>=0?"positive":"negative"])},(0,n.v_)(i(o.value.change))+" ("+(0,n.v_)(i(o.value.changePercent))+"%) ",3)]),(0,s.Lk)("div",Re,[c[4]||(c[4]=(0,s.Lk)("span",{class:"info-label"},"今日开盘",-1)),(0,s.Lk)("span",Ke,(0,n.v_)(i(o.value.open)),1)]),(0,s.Lk)("div",Te,[c[5]||(c[5]=(0,s.Lk)("span",{class:"info-label"},"今日最高",-1)),(0,s.Lk)("span",Ne,(0,n.v_)(i(o.value.high)),1)]),(0,s.Lk)("div",Oe,[c[6]||(c[6]=(0,s.Lk)("span",{class:"info-label"},"今日最低",-1)),(0,s.Lk)("span",Ie,(0,n.v_)(i(o.value.low)),1)]),(0,s.Lk)("div",We,[c[7]||(c[7]=(0,s.Lk)("span",{class:"info-label"},"成交量",-1)),(0,s.Lk)("span",Qe,(0,n.v_)(o.value.volume||"N/A"),1)])])):(0,s.Q3)("",!0),o.value&&o.value.metrics?((0,s.uX)(),(0,s.CE)("div",Ve,[c[14]||(c[14]=(0,s.Lk)("h2",null,"关键指标",-1)),(0,s.Lk)("div",ze,[(0,s.Lk)("div",Be,[c[8]||(c[8]=(0,s.Lk)("h3",null,"市盈率 (P/E)",-1)),(0,s.Lk)("p",Ue,(0,n.v_)(i(o.value.metrics.peRatio)),1)]),(0,s.Lk)("div",je,[c[9]||(c[9]=(0,s.Lk)("h3",null,"市净率 (P/B)",-1)),(0,s.Lk)("p",Ye,(0,n.v_)(i(o.value.metrics.pbRatio)),1)]),(0,s.Lk)("div",He,[c[10]||(c[10]=(0,s.Lk)("h3",null,"股息率",-1)),(0,s.Lk)("p",Ge,(0,n.v_)(i(o.value.metrics.dividendYield))+"%",1)]),(0,s.Lk)("div",Je,[c[11]||(c[11]=(0,s.Lk)("h3",null,"市值",-1)),(0,s.Lk)("p",Ze,(0,n.v_)(o.value.metrics.marketCap||"N/A"),1)]),(0,s.Lk)("div",qe,[c[12]||(c[12]=(0,s.Lk)("h3",null,"52周最高",-1)),(0,s.Lk)("p",et,(0,n.v_)(i(o.value.metrics.week52High)),1)]),(0,s.Lk)("div",tt,[c[13]||(c[13]=(0,s.Lk)("h3",null,"52周最低",-1)),(0,s.Lk)("p",at,(0,n.v_)(i(o.value.metrics.week52Low)),1)])])])):(0,s.Q3)("",!0)]))}};const st=(0,d.A)(lt,[["__scopeId","data-v-df0e8d2a"]]);var nt=st;const ot={class:"data-list-container"},it={class:"top-bar"},rt={class:"search-sort"},ct={class:"data-table-wrapper"},ut={class:"data-table"},dt={key:0,class:"no-data"};function vt(e,t,a,o,i,r){return(0,s.uX)(),(0,s.CE)("div",ot,[(0,s.Lk)("div",it,[t[5]||(t[5]=(0,s.Lk)("h2",{class:"title"},"股票数据列表",-1)),(0,s.Lk)("div",rt,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.searchQuery=e),type:"text",placeholder:"搜索股票名称...",class:"search-input"},null,512),[[l.Jo,i.searchQuery]]),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.sortField=e),class:"sort-select"},[...t[3]||(t[3]=[(0,s.Lk)("option",{value:"name"},"按名称排序",-1),(0,s.Lk)("option",{value:"last"},"按最新价格排序",-1),(0,s.Lk)("option",{value:"chgPercent"},"按涨跌幅排序",-1)])],512),[[l.u1,i.sortField]]),(0,s.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>r.sortData&&r.sortData(...e)),class:"sort-btn"},[...t[4]||(t[4]=[(0,s.Lk)("i",{class:"fas fa-sort"},null,-1),(0,s.eW)(" 排序 ",-1)])])])]),(0,s.Lk)("div",ct,[(0,s.Lk)("table",ut,[t[6]||(t[6]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"时间戳"),(0,s.Lk)("th",null,"股票名称"),(0,s.Lk)("th",null,"最新价格"),(0,s.Lk)("th",null,"最高价"),(0,s.Lk)("th",null,"最低价"),(0,s.Lk)("th",null,"涨跌额"),(0,s.Lk)("th",null,"涨跌幅"),(0,s.Lk)("th",null,"成交量"),(0,s.Lk)("th",null,"更新时间")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.filteredData,(e,t)=>((0,s.uX)(),(0,s.CE)("tr",{key:t,class:(0,n.C4)({even:t%2===0})},[(0,s.Lk)("td",null,(0,n.v_)(e.timestamp),1),(0,s.Lk)("td",null,(0,n.v_)(e.name),1),(0,s.Lk)("td",null,(0,n.v_)(e.last),1),(0,s.Lk)("td",null,(0,n.v_)(e.high),1),(0,s.Lk)("td",null,(0,n.v_)(e.low),1),(0,s.Lk)("td",{class:(0,n.C4)(e.chg_>=0?"positive":"negative")},(0,n.v_)(e.chg_),3),(0,s.Lk)("td",{class:(0,n.C4)(e.chgPercent>=0?"positive":"negative")},(0,n.v_)(e.chgPercent)+"% ",3),(0,s.Lk)("td",null,(0,n.v_)(e.vol_),1),(0,s.Lk)("td",null,(0,n.v_)(e.time),1)],2))),128))])])]),0===r.filteredData.length?((0,s.uX)(),(0,s.CE)("div",dt," 没有找到匹配的数据 ")):(0,s.Q3)("",!0)])}var mt={data(){return{searchQuery:"",sortField:"name",sortAscending:!0,dataList:[{timestamp:"2025/6/11 7:46",name:"3M",last:145.06,high:145.31,low:143.15,chg_:.83,chgPercent:.58,vol_:"3.13M",time:"10月6日"},{timestamp:"2025/6/11 7:46",name:"Amazon.com",last:217.61,high:217.69,low:214.15,chg_:.63,chgPercent:.29,vol_:"31.18M",time:"10月6日"},{timestamp:"2025/6/11 7:46",name:"American Express",last:299.52,high:301.78,low:298,chg_:-2.04,chgPercent:-.68,vol_:"2.05M",time:"10月6日"},{timestamp:"2025/6/11 7:46",name:"Amgen",last:293.43,high:295.64,low:289.79,chg_:3.45,chgPercent:1.19,vol_:"2.44M",time:"10月6日"},{timestamp:"2025/6/11 7:46",name:"Apple",last:202.67,high:204.35,low:200.57,chg_:1.22,chgPercent:.61,vol_:"52M",time:"10月6日"},{timestamp:"2025/6/11 7:46",name:"Boeing",last:215.73,high:217.9,low:213.25,chg_:-1.78,chgPercent:-.82,vol_:"8.19M",time:"10月6日"},{timestamp:"2025/6/11 7:46",name:"Caterpillar",last:358.57,high:360.36,low:356.09,chg_:.5,chgPercent:.14,vol_:"1.89M",time:"10月6日"},{timestamp:"2025/6/11 7:46",name:"Chevron",last:143.35,high:144.94,low:141.91,chg_:2.59,chgPercent:1.84,vol_:"9.84M",time:"10月6日"},{timestamp:"2025/6/11 7:46",name:"Cisco",last:65.15,high:66.08,low:64.81,chg_:-.75,chgPercent:-1.14,vol_:"16.66M",time:"10月6日"},{timestamp:"2025/6/11 7:46",name:"Coca-Cola",last:72.35,high:72.69,low:71.76,chg_:.58,chgPercent:.81,vol_:"12.26M",time:"10月6日"}]}},computed:{filteredData(){const e=this.searchQuery.toLowerCase();return this.dataList.filter(t=>t.name.toLowerCase().includes(e))}},methods:{sortData(){this.dataList.sort((e,t)=>{let a=e[this.sortField],l=t[this.sortField];return"number"===typeof a&&"number"===typeof l?this.sortAscending?a-l:l-a:(a=String(a).toLowerCase(),l=String(l).toLowerCase(),this.sortAscending?a.localeCompare(l):l.localeCompare(a))}),this.sortAscending=!this.sortAscending}}};const ht=(0,d.A)(mt,[["render",vt],["__scopeId","data-v-79df41b8"]]);var pt=ht;const gt=[{path:"/",component:q,children:[{path:"",name:"MarketOverview",component:Fe,meta:{title:"市场概况"}},{path:"stock-analysis",name:"StockAnalysis",component:nt,meta:{title:"个股分析"}},{path:"data-list",name:"DataList",component:pt,meta:{title:"数据列表"}}]}],kt=(0,h.aE)({history:(0,h.LA)(),routes:gt,scrollBehavior(){return{top:0}}});kt.beforeEach((e,t,a)=>{e.meta.title&&(document.title=e.meta.title+" | 股票分析系统"),a()});var ft=kt;(0,l.Ef)(m).use(ft).use((0,g.Ey)()).mount("#app")}},t={};function a(l){var s=t[l];if(void 0!==s)return s.exports;var n=t[l]={exports:{}};return e[l].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,l,s,n){if(!l){var o=1/0;for(u=0;u<e.length;u++){l=e[u][0],s=e[u][1],n=e[u][2];for(var i=!0,r=0;r<l.length;r++)(!1&n||o>=n)&&Object.keys(a.O).every(function(e){return a.O[e](l[r])})?l.splice(r--,1):(i=!1,n<o&&(o=n));if(i){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[l,s,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var s,n,o=l[0],i=l[1],r=l[2],c=0;if(o.some(function(t){return 0!==e[t]})){for(s in i)a.o(i,s)&&(a.m[s]=i[s]);if(r)var u=r(a)}for(t&&t(l);c<o.length;c++)n=o[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(u)},l=self["webpackChunkstock_visualization"]=self["webpackChunkstock_visualization"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[504],function(){return a(4155)});l=a.O(l)})();
//# sourceMappingURL=app.c8a1f675.js.map